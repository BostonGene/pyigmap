// Global default params, used in configs
params {
    // Inputs
    zenodo_link = 'https://zenodo.org/records/11103555/files/'

    // Outputs
    outdir = './results'

    // Fastp parameters
    insert_size = 1
}

process {
    withName:GetLinks {
        container = 'downloader'
    }
    withName:Download {
        container = 'downloader'
        publishDir = [
            path: "${params.outdir}/downloaded",
            mode: 'copy'
        ]
    }
    withName:Downsample {
        container = 'downloader'
        publishDir = [
            path: "${params.outdir}/downsampled",
            mode: 'copy'
        ]
    }
    withName:CalibDedup {
        container = 'calib-dedup-image'
        publishDir = [
            path: "${params.outdir}/deduplicated",
            mode: 'copy'
        ]
    }
    withName:Fastp {
        container = 'fastp-image'
        publishDir = [
            path: "${params.outdir}/merged",
            mode: 'copy'
        ]
    }
    withName:Vidjil {
        container = 'vidjil-image'
        publishDir = [
            path: "${params.outdir}/vidjil",
            mode: 'copy'
        ]
    }
    withName:IgBlast {
        container = 'igblast-image'
        publishDir = [
            path: "${params.outdir}/igblast",
            mode: 'copy'
        ]
    }
    withName:CDR3ErrorCorrector {
        container = 'cdr3nt-error-corrector-image'
        publishDir = [ path: params.outdir, mode: 'copy' ]
    }
}

docker {
    enabled = true
    remove = true
}

manifest {
    name            = 'bostongene/pyigmap'
    defaultBranch   = 'main'
    homePage        = 'https://github.com/bostongene/pyigmap'
    mainScript      = 'main.nf'
    nextflowVersion = '>=23.10.1'
}
